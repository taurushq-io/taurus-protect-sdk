syntax = "proto3";
package tgvalidatord;

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";
import "wallet.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

option java_package = "com.taurushq.sdk.protect.proto.v1";

message AssetParams {
  oneof params {
    HederaNativeTokenParams hederaNativeTokenParams = 1;
    SolanaNativeTokenParams solanaNativeTokenParams = 2;
  }
}

message HederaNativeTokenParams {
  string name = 1;
  string symbol = 2;
  uint64 initialSupply = 3;
  bool freezeDefault = 4;
  google.protobuf.Timestamp expiry = 5;
  string autoRenewPeriod = 6;
  string memo = 7;
  bytes metadata = 8;
  string tokenType = 9;
  string supplyType = 10;
  uint64 maxSupply = 11;
  bytes customFee = 12;
  uint64 decimals = 13;
  bool forceKYC = 14;
}

message SolanaNativeTokenParams {
  uint64 decimals = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Token decimals: 0 to 9.";
  }];
  // on-chain metadata
  string name = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Name to be used on the request meta data.";
  }];
  string symbol = 3 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Symbol to be used on the request meta data.";
  }];
  string uri = 4 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "URI to be passed on to the request meta data.";
  }];
  bool enableFreeze = 5 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "If set to true, the freeze authority will be equal to the mint authority.";
  }];
}

message BlockchainEvent {
  string eventType = 1;
  oneof eventValue {
    HederaNativeTokenTransaction hederaNativeTokenTransaction = 2;
  }
}

message HederaNativeTokenTransaction {
  string transactionID = 1;
  string transactionType = 2;
  string sender = 3;
  repeated HederaNativeTokenTransfer sources = 4;
  repeated HederaNativeTokenTransfer destinations = 5;
}

message HederaNativeTokenTransfer {
  string address = 1;
  string amount = 2;
  Asset asset = 3;
}

message AssetAttribute {
  string key = 1;
  string value = 2;
}

message AssetResource {
  string id = 1;
  uint64 tenantID = 2;
  uint64 version = 3;
  google.protobuf.Timestamp createdAt = 4;
  google.protobuf.Timestamp updatedAt = 5;
  string label = 6;
  string assetType = 7;
  Asset asset = 8;
  string currencyID = 9;
  repeated AssetAttribute assetAttributes = 10;
  string status = 11;

  BlockchainAsset blockchainAsset = 100;
}

message BlockchainAsset {
  oneof asset{
    HederaNativeTokenAsset hederaNativeTokenAsset = 1;
    SolanaNativeTokenAsset solanaNativeTokenAsset = 2;
  }
}

message HederaNativeTokenAsset {
  string address = 1;
  HederaNativeTokenState state = 2;
}

message HederaNativeTokenState {
  string name = 1;
  string symbol = 2;
  string memo = 3;
  uint64 totalSupply = 4;
  google.protobuf.Duration autoRenewPeriod = 5;
  uint64 decimals = 6;
  bool freezeDefault = 7;
  uint64 initialSupply = 8;
  string treasuryAccountID = 9;
  string type = 10;
  bool pauseStatus = 11;
  bool deleted = 12;
  google.protobuf.Timestamp  createdTimestamp = 13;
  google.protobuf.Timestamp  expiryTimestamp = 14;
  google.protobuf.Timestamp  modificationTimestamp = 15;
  string autoRenewAccount = 16;
  string customFees = 17;
  string adminKey = 18;
  string feeScheduleKey = 19;
  string freezeKey = 20;
  string kycKey = 21;
  string supplyKey = 22;
  string wipeKey = 23;
  string pauseKey = 24;
}

message SolanaNativeTokenAsset {
  string address = 1;
  SolanaNativeTokenState state = 2;
}

message SolanaNativeTokenState {
  string name = 1;
  string symbol = 2;
  uint64 decimals = 3;
  string type = 4;
  string uri = 5;
  string owner = 6;
  string mintAuthority = 7;
  string freezeAuthority = 8 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Not set when freeze is not enabled.";
  }];
}

message AssetEvent {
  string id = 1;
  uint64 tenantID = 2;
  string hash = 3;
  Asset asset = 4;
  BlockchainEvent blockchainEvent = 5;
  google.protobuf.Timestamp createdAt = 6;
  google.protobuf.Timestamp updatedAt = 7;
}

message InternalAddressDetails {
  string address = 1;
  uint64 blockchainAddressID = 2;
}

message WhitelistedAddressDetails {
  string address = 1;
  uint64 whitelistedAddressID = 2;
}

message ExternalAddressDetails {
  string address = 1;
}

message AssetHolder {
  string id = 1;
  uint64 tenantID = 2;
  oneof addressDetails{
    InternalAddressDetails internalAddressDetails = 3;
    WhitelistedAddressDetails whitelistedAddressDetails = 4;
    ExternalAddressDetails externalAddressDetails = 5;
  }
  Asset asset = 6;
  string balance = 7;
  google.protobuf.Timestamp createdAt = 8;
  google.protobuf.Timestamp updatedAt = 9;
}
