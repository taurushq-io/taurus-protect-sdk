syntax = "proto3";
package tgvalidatord;

import "currency.proto";
import "score.proto";

import "google/protobuf/timestamp.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

option java_package = "com.taurushq.sdk.protect.proto.v1";

message Asset {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      required: ["currency"]
    }
  };

  string currency = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "The currency name, e.g. 'ALGO', 'AVAX', 'USDt'. Set to 'Unknown' when the currency is unknown (as for the 'kind' field)."
  }];
  enum Kind {
    _default_ = 0;
    Unknown = 1;
    NFT = 2;
  }
  string kind = 2;
  message _NFT {
    string tokenid = 1;
  }
  _NFT nft = 3;
  message _Unknown {
    string blockchain = 1;
    string arg1 = 2;
    string arg2 = 3;
    string network = 4;
  }
  _Unknown unknown = 4;
  Currency currencyInfo = 5;
}

message AssetBalance {
  Asset asset = 1;
  Balance balance = 2;
}

message NFTCollectionBalance {
  Currency currencyInfo = 1;
  Balance balance = 2;
}

message Balance {
  string totalConfirmed = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Total confirmed balance in the smallest currency unit (e.g., WEI for ETH)."
  }];

  string totalUnconfirmed = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Total balance including unconfirmed transactions in smallest currency unit (e.g., WEI). Exceeds totalConfirmed when transactions are pending confirmation. Equal to confirmed balance when all funds are confirmed."
  }];

  string availableConfirmed = 3 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Available confirmed balance that is ready to be spent or used."
  }];

  string availableUnconfirmed = 4 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Available balance including unconfirmed transactions."
  }];

  string reservedConfirmed = 5 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Confirmed reserved balance that is set being held for specific purposes, such as another pending transactions."
  }];

  string reservedUnconfirmed = 6 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
    description: "Reserved unconfirmed balance that is not yet fully validated."
  }];
}

message BalanceHistoryPoint {
  google.protobuf.Timestamp pointDate = 1;
  Balance balance = 2;
}

// Deprecated: Wallets can have thousands of addresses. It is not a good idea to serialize a wallet with all its addresses.
// Generally, WalletInfo should be used instead
message Wallet {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    example: "{ \"id\": 42, \"currency\": \"ETH\", \"name\":\"Nostro wallet\", \"coin\":\"ETH\"}"
  };

  uint64 id = 1;
  Balance balance = 2;
  string currency = 3;
  string coin = 4;
  string name = 5;
  string container = 6;
  string seed = 7;
  string accountPath = 8;
  repeated Address addresses = 9;
  bool isOmnibus = 10;

  google.protobuf.Timestamp creationDate = 11;
  google.protobuf.Timestamp updateDate = 12;

  string customerId = 13;
  string comment = 14;
  bool disabled = 15;

  string blockchain = 16;
  uint64 addressesCount = 17;
  repeated WalletAttribute attributes = 18;

  Currency currencyInfo = 19;

  string externalWalletId = 20 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "An optional external identifier for the wallet."
    }
  ];
}

message WalletAttribute {
  string key = 1;
  string value = 2;
  uint64 id = 3;
  string contentType = 4;
  string owner = 5;
  string type = 6;
  string subtype = 7;
  bool isfile = 8;
}

message WalletInfo {
  uint64 id = 1;
  Balance balance = 2;
  string currency = 3;
  string coin = 4;
  string name = 5;
  string container = 6;
  string seed = 7;
  string accountPath = 8;
  bool isOmnibus = 9;

  google.protobuf.Timestamp creationDate = 10;
  google.protobuf.Timestamp updateDate = 11;

  string customerId = 12;
  string comment = 13;
  bool disabled = 14;

  string blockchain = 15;
  uint64 addressesCount = 16;

  Currency currencyInfo = 17;
  repeated WalletAttribute attributes = 18;
  string network = 19;
  string visibilityGroupID = 20;

  string externalWalletId = 21 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "An optional external identifier for the wallet."
    }
  ];
}

message Address {
  uint64 id = 1 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "uint64; Unique identifier for the address."
    }
  ];

  uint64 walletId = 2 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "uint64; Unique identifier for the wallet associated with the address (parent wallet)"
    }
  ];

  string seed = 3 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Which seed in the HSM to use for address generation.."
    }
  ];

  string currency = 4 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Currency associated with the address (e.g., ETH, BTC). For a list of enabled currencies, query the [currencies endpoint](https://docs.taurushq.com/protect-capital/reference/walletservice_getcurrencies)."
    }
  ];

  string addressPath = 5 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "The derivation path for the address, used to generate the address from the seed."
    }
  ];

  uint64 addressIndex = 6 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "uint64; Index used for address generation. Required for derivation paths."
    }
  ];

  string address = 7 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "The actual address generated for the wallet."
    }
  ];

  string alternateAddress = 8 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "An alternate address that can be used for transactions, if available."
    }
  ];

  string comment = 9 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "An optional comment associated with the address."
    }
  ];

  string label = 10 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "A user-friendly label for the address (e.g., 'Deposit Address'). Displayed as `Name` in the UI."
    }
  ];

  string customerId = 11 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Identifier for the customer associated with the address."
    }
  ];

  uint64 nonce = 12 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "uint64; The current nonce of the address. A nonce is a 32-bit (or 4-byte) number used to prevent replay attacks."
    }
  ];

  Balance balance = 13 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Balance associated with the address, including confirmed and unconfirmed amounts."
    }
  ];

  string signature = 14 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Signature associated with the address."
    }
  ];

  repeated Score scores = 15 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Risk score related to the address, pulled from external reputation services. (e.g., Scorechain, Chainalysis, etc...)."
    }
  ];

  repeated AddressAttribute attributes = 16 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Additional attributes and metadata associated with the address."
    }
  ];

  repeated uint64 linkedWhitelistedAddressIds = 17 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "List of whitelisted address IDs that are linked to this address."
    }
  ];

  google.protobuf.Timestamp creationDate = 18 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "The date and time when the address was created."
    }
  ];

  google.protobuf.Timestamp updateDate = 19 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "The date and time when the address was last updated."
    }
  ];

  WalletInfo walletInfo = 20 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Information about the parent wallet."
    }
  ];

  bool disabled = 21 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Indicates whether the address is disabled."
    }
  ];

  Currency currencyInfo = 22 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Information about the currency associated with the address."
    }
  ];

  bool canUseAllFunds = 23 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Indicates whether all funds in the address can be used."
    }
  ];

  string externalAddressId = 24 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "An optional external identifier for the address."
    }
  ];

  string status = 25 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Status of address creation. Creating status is used for asynchronous address creation. Value is one of `created`, `creating, `signed`, `observed`, or `confirmed`."
    }
  ];
}

message AddressAttribute {
  string key = 1 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "A key that Protect assigns to the attribute. E.g., `legacyAddress` `has_any_transactions`, etc... "
    }
  ];
  string value = 2 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "The value of the attribute."
    }
  ];
  uint64 id = 3 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Unique identifier for the attribute."
    }
  ];
  string contentType = 4 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Content type of the attribute value. Usually `text/plain.`"
    }
  ];
  string owner = 5 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Owner of the attribute. Most commonly `system` or `user`."
    }
  ];
  string type = 6 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "A Protect generated attribute type. E.g., `transaction_info`, `tag`, etc..."
    }
  ];
  string subtype = 7 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "A Protect generated subtype. Not commonly used but can be used to further classify the attribute."
    }
  ];
  bool isfile = 8 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Indicates whether the attribute is a file."
    }
  ];
}

message UTXO {
  uint64 id = 1;
  string hash = 2;
  uint32 outputIndex = 3;
  string script = 4;
  uint64 value = 5;
  uint64 blockHeight = 6;
  uint64 reservedByRequestId = 7 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "reservedByRequestId has been replaced by reservationId since 3.22. It will always be empty since 3.22.";
    }
  ];
  uint64 reservationId = 8;
  string valueString = 9;
}

message ProofOfReserve {
  // _X because with grpc gateway 0 field of enum are not returned in JSON
  //  can use "runtime.WithMarshalerOption(runtime.MIMEWildcard, &runtime.JSONPb{OrigName: true, EmitDefaults: true})"
  //  but this will break other endpoints (e.g. without this option empty repeated message are display as null, with they are returned as empty array)
  enum Curve {
    _curve = 0;
    Secp256k1 = 1;
    Ed25519 = 2;
    Secp256r1 = 3;
    Pallas = 4;
  }
  enum Cipher {
    _cipher = 0;
    ECDSA_SHA256 = 1;
    ECDSA_SHA512 = 2;
    EDDSA = 3;
    Schnorr = 4;
  }

  enum ReserveType {
    Generic = 0;
    ADA = 1;
  }

  Curve curve = 1;
  Cipher cipher = 2;
  string path = 3;
  string address = 4;
  bytes publicKey = 5;
  string challenge = 6;
  bytes challengeResponse = 7;
  ReserveType type = 8 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Indicates the type of PoR. The 'stake' fields are only relevant when the type is 'ADA'. For the 'Generic' case they must be ignored.";
    }
  ];
  bytes stakePublicKey = 9;
  bytes stakeChallengeResponse = 10;
}

message LightAddressInfo {
  uint64 id = 1 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Unique identifier for the address."
    }
  ];
  uint64 walletId = 2 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Unique identifier for the wallet associated with the address (parent wallet)"
    }
  ];
  string address = 3 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "The actual address generated for the wallet."
    }
  ];
  string customerId = 4 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Identifier for the customer associated with the address."
    }
  ];
  string network = 5 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Network associated with the address (e.g., mainnet, testnet)."
    }
  ];
  string label = 6 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "A user-friendly label for the address (e.g., 'Deposit Address'). Displayed as `Name` in the UI."
    }
  ];
  string comment = 7 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "An optional comment associated with the address."
    }
  ];
  string addressPath = 8 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "The derivation path for the address, used to generate the address from the seed."
    }
  ];
  string status = 9 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Status of address creation. Creating status is used for asynchronous address creation. Value is one of `created`, `creating, `signed`, `observed`, or `confirmed`."
    }
  ];
  string currencyId = 10 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "Currency associated with the address (e.g., ETH, BTC). For a list of enabled currencies, query the [currencies endpoint](https://docs.taurushq.com/protect-capital/reference/walletservice_getcurrencies)."
    }
  ];
  google.protobuf.Timestamp creationDate = 11;
  google.protobuf.Timestamp updateDate = 12;
  string externalAddressId = 13 [
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "An optional external identifier for the address."
    }
  ];
}

